<% content_for :title, @book.title %>

<div>
    <div>
        <%= link_to "‚Üê Êàª„Çã", books_path %>
        <h1>Êú¨„ÅÆË©≥Á¥∞</h1>
    </div>

    <div>
        <div>
            <!-- Ë°®Á¥ôÁîªÂÉè -->
            <div>
                <% if @book.cover_image_url.present? %>
                <img src="<%= @book.cover_image_url %>" alt="<%= @book.title %>">
                <% else %>
                <div>
                    <span>No image</span>
                </div>
                <% end %>
            </div>

            <!-- Êú¨„ÅÆÊÉÖÂ†± -->
            <div>
                <div>
                    <div>
                        <h2><%= @book.title %></h2>

                        <% if @book.author.present? %>
                        <p>
                            <span>ËëóËÄÖ:</span> <%= @book.author %>
                        </p>
                        <% end %>

                        <% if @book.publisher.present? %>
                        <p>
                            <span>Âá∫ÁâàÁ§æ:</span> <%= @book.publisher %>
                        </p>
                        <% end %>

                        <p>
                            <span>ËøΩÂä†Êó•:</span> <%= @book.created_at.strftime("%YÂπ¥%mÊúà%dÊó•") %>
                        </p>
                    </div>

                    <!-- Ë©ï‰æ° -->
                    <% if @book.rating.present? %>
                    <div>
                        <h3>Ë©ï‰æ°</h3>
                        <div>
                            <% @book.rating.times do %>
                            <span>‚òÖ</span>
                            <% end %>
                            <% (5 - @book.rating).times do %>
                            <span>‚òÜ</span>
                            <% end %>
                            <span>(<%= @book.rating %>/5)</span>
                        </div>
                    </div>
                    <% end %>

                    <!-- „É°„É¢„ÉªÊÑüÊÉ≥ -->
                    <% if @book.memo.present? %>
                    <div>
                        <h3>„É°„É¢„ÉªÊÑüÊÉ≥</h3>
                        <div>
                            <p><%= @book.memo %></p>
                        </div>
                    </div>
                    <% end %>

                    <!-- „Ç¢„ÇØ„Ç∑„Éß„É≥„Éú„Çø„É≥ -->
                    <div>
                        <%= link_to "Á∑®ÈõÜ", edit_book_path(@book) %>
                        <%= link_to "ÂâäÈô§", @book, method: :delete %>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÊúÄËøëËøΩÂä†„Åó„ÅüÊú¨ -->
    <div>
        <h3>ÊúÄËøëËøΩÂä†„Åó„ÅüÊú¨</h3>
        <% recent_books = current_user.books.recent.limit(4).where.not(id: @book.id) %>

        <% if recent_books.any? %>
        <div>
            <% recent_books.each do |book| %>
            <div>
                <% if book.cover_image_url.present? %>
                <div>
                    <img src="<%= book.cover_image_url %>" alt="<%= book.title %>">
                </div>
                <% else %>
                <div>
                    <span>üìñ</span>
                </div>
                <% end %>

                <div>
                    <h4>
                        <%= link_to book.title, book %>
                    </h4>
                    <% if book.author.present? %>
                    <p><%= book.author %></p>
                    <% end %>
                </div>
            </div>
            <% end %>
        </div>
        <% else %>
        <p>‰ªñ„Å´Êú¨„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</p>
        <% end %>
    </div>
</div>